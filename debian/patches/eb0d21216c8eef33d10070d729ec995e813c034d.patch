From eb0d21216c8eef33d10070d729ec995e813c034d Mon Sep 17 00:00:00 2001
From: Nick Avramoussis <4256455+Idclip@users.noreply.github.com>
Date: Sat, 26 Nov 2022 17:55:21 +0000
Subject: [PATCH] Fixed a build issue with AX on 32 bit platforms. IR void* is
 always i8* regardless

Signed-off-by: Nick Avramoussis <4256455+Idclip@users.noreply.github.com>
---
 openvdb_ax/openvdb_ax/codegen/Types.h | 4 ++--
 pendingchanges/ax32fix.txt            | 3 +++
 2 files changed, 5 insertions(+), 2 deletions(-)
 create mode 100644 pendingchanges/ax32fix.txt

diff --git a/openvdb_ax/openvdb_ax/codegen/Types.h b/openvdb_ax/openvdb_ax/codegen/Types.h
index db47ba26c8..68242ab8d2 100644
--- a/openvdb_ax/openvdb_ax/codegen/Types.h
+++ b/openvdb_ax/openvdb_ax/codegen/Types.h
@@ -198,8 +198,8 @@ struct LLVMType<void>
     }
 };
 
-/// @note void* implemented as signed int_t* to match clang IR generation
-template <> struct LLVMType<void*> : public LLVMType<int_t<sizeof(void*)>::type*> {};
+/// @note void* implemented as signed int8_t* to match clang IR generation
+template <> struct LLVMType<void*> : public LLVMType<int8_t*> {};
 template <> struct LLVMType<openvdb::math::half>
 {
     // @note LLVM has a special representation of half types. Don't alias to
diff --git a/pendingchanges/ax32fix.txt b/pendingchanges/ax32fix.txt
new file mode 100644
index 0000000000..b9a96ff858
--- /dev/null
+++ b/pendingchanges/ax32fix.txt
@@ -0,0 +1,3 @@
+Build:
+ - Fixed a build issue with AX on 32bit platforms.
+ [Reported by Mathieu Malaterre]
